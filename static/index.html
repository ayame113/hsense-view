<!DOCTYPE html>
<html lang="ja" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="preload" href="/js/component/data_list.ts" as="script" crossorigin>
		<link rel="preload" href="/js/component/socket-graph-data.ts" as="script" crossorigin>
		<link rel="preload" href="/js/utils/iter.ts" as="script" crossorigin>
		<link rel="preload" href="/js/utils/list.ts" as="script" crossorigin>
		<link rel="stylesheet" href="/style/main.css">
		<script src="/js/component/socket-graph-data.ts" charset="utf-8" type="module"></script>
	</head>
	<body>
		<header>
			<h1>＜タイトル＞</h1>
		</header>
		<main></main>
		<footer>フッター</footer>
	</body>
	<script type="module">
		const id = new URL(location.href).searchParams.get("id");
		if (!id) {
			console.error("グラフを表示できません");
			// alert("グラフを表示できません");
			// location.href = "/"
		}
		const main = document.querySelector("main");
		const graph = document.createElement("socket-graph-data");
		graph.setAttribute("data-source-url", `/api/data/${id}?fromTime=%fromTime%&limit=%limit%`);
		graph.setAttribute("data-source-streaming-url", `/sse/data/${id}`);
		main.appendChild(graph);
		const drower = document.createElement("socket-graph-drower");
		main.appendChild(drower);
	</script>
	<script>
		window.addEventListener("load", ()=>{
			console.log("performance.now", performance.now())
		})
	</script>
</html>
